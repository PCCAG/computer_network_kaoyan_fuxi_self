# 计算网络概况

## 概念

## 组成

## 功能

## 分类

## 标准化工作及其相关组织

![1695440268298](image/计算机网络/1695440268298.png)

## 计算机网络性能指标

### 速率

### 带宽

### 吞吐量

### 时延

### 时延带宽积

### 往返时延RTT

### 利用率

# 网络体系结构

## 导图与概况

计算机网络体系结构分为3种：**OSI体系结构（七层）**，**TCP/IP体系结构（四层）**，**五层体系结构**。

* **OSI体系结构**:  概念清楚，理论也比较完整，但是它既复杂又不实用。
* **TCP/IP体系结构**:  TCP/IP是一个四层体系结构，得到了广泛的运用。
* **五层体系结构**:  为了方便学习，折中 **OSI体系结构** 和 TCP/IP体系结构，综合二者的优点，这样既简洁，又能将概念讲清楚。

![1695439460357](image/计算机网络/1695439460357.png)

## ISO/OSI参考模型

### 来源

![1693742492117](image/网络体系模型/1693742492117.png)

![1693742328027](image/网络体系模型/1693742328027.png)

### 目的

为了支持**异构网络系统**的互联互通

![1693742451985](image/网络体系模型/1693742451985.png)

### 后果

但是它理论成功但是没有在市场广泛应用, 但为后来人学习和研发提供了参考

![1693742762857](image/网络体系模型/1693742762857.png)

### OSI七层模型

* **层级**

1. **物理层**
2. **数据链路层**
3. **网络层**
4. **传输层**
5. **会话层**
6. **表示层**
7. **应用层**

![1693742875052](image/网络体系模型/1693742875052.png)


* **底部三层称为通信子网,顶部三层称为资源子网,中间的传输层作为上下两个子网的接口**
* **资源子网负责数据处理,通信子网扶着数据通信,每一层都可以完成特定的功能**


![1693743179940](image/网络体系模型/1693743179940.png)


### ISO/OSI参考模型解释通信过程

![1693744615145](image/网络体系模型/1693744615145.png)


* **上面四层端到端,下面四层点到点**


![1693744652169](image/网络体系模型/1693744652169.png)


* **PDU是协议数据单元, 每一层往下走时都会添加和封装相关数据传输信息,直到物理层**
* **数据链路层在数据的头部和尾部都会添加信息.(记忆:其他层次都说三个字就数据链路层是五个字)**


**不考虑中间系统(交换机路由器等)的简化传输示意图**

![1693745130416](image/网络体系模型/1693745130416.png)


### ISO/OSI参考模型各层功能及所对应的重要协议

#### 应用层

* 所有能和用户产生交互的网络程序
* 典型应用层服务

1. FTP 文件传输
2. SMTP 电子邮件
3. HTTP 万维网

![1693745509102](image/网络体系模型/1693745509102.png)


#### 表示层

![1693745923804](image/网络体系模型/1693745923804.png)


#### 会话层

![1693746233115](image/网络体系模型/1693746233115.png)


#### 传输层

* **可靠传输,不可靠传输** 区别在于是否有确认机制(确认接受端是否收到消息才能继续传输)
* **差错控制**,对各种报文的丢失和顺序进行控制和纠正
* **流量控制**,控制发送端与接收端双方的收发速率,控制发送的速率
* **复用和分用** 多个应用进程有自己唯一的端口号,它们同时使用下面传输层的服务,到达接收端时,再把收到的信息分别交付给上面应用层中相应的进程
* **典型协议**

1. TCP
2. UDP

![1693747023183](image/网络体系模型/1693747023183.png)

![1693746543729](image/网络体系模型/1693746543729.png)


#### 网络层

**也叫 IP层 网际层 是非常重要的一层**

* 主要任务时**分组**把源端传到目的端,为分组交换网上的不同主机提供通信服务.
* 网络层传输单位是**数据报**
* 数据报与分组的关系.**当数据报比较大时采用分组**,**数据报比较小直接数据报传输**


* **功能**

1. **路由选择**
2. **流量控制**
3. **差错控制**
4. **拥塞控制**


* **主要协议**

1. IP
2. IPX
3. ICMP
4. IGMP
5. ARP
6. RARP
7. OSPF

![1693747682108](image/网络体系模型/1693747682108.png)


#### 数据链路层


![1693748572170](image/网络体系模型/1693748572170.png)


#### 物理层


![1693748726227](image/网络体系模型/1693748726227.png)


### 总结


![1693748847330](image/网络体系模型/1693748847330.png)


## TCP/IP模型

**TCP/IP与OSI最大的不同在于：OSI是一个理论上的网络通信模型，而TCP/IP则是实际运行的网络协议。**

#### **层次**

* 应用层
* 传输层
* 网际层
* 网络接口层

![1693750325215](image/网络体系模型/1693750325215.png)

#### 比较ISO/OSI模型

* **相同点**

![1693750397517](image/网络体系模型/1693750397517.png)

* **不同点**

记忆:对角线记忆

网络层对角线相同都是无连接+面向连接,传输层TCP/IP是无连接,OSI是面向连接

![1693750631430](image/网络体系模型/1693750631430.png)


## 五层参考模型(五层体系结构)

### 体系结构

![1693750845970](image/网络体系模型/1693750845970.png)

### 五层参考模型的数据封装与解封装

![1693751078825](image/网络体系模型/1693751078825.png)


# 物理层

## 导图

![1693751829543](image/计算机网络/1693751829543.png)

## 通信基础

### 物理层基本概念

* 物理层主要任务: 确认与传输媒体**接口**有关的一些特性 (**定义标准**)
* 物理层解决如何在连接各种计算机的传输媒体上**传输数据比特流,**而不是具体的传输媒体

![1693752347337](image/计算机网络/1693752347337.png)

* **物理层定义的标准:**

1. **机械特性  物理连接个规格 接口形状 引线数量 引脚数量**
2. **电气特性** **电压范围**,阻坑匹配,传输速率,距离限制,
3. **功能特性 电平含义 接口部件信号线的用途**
4. **规程特性**(过程特性) **物理线路的工作规程和时序关系**

![1693752888799](image/计算机网络/1693752888799.png)

### 数据通信基础知识

#### 导图1

![1693755505518](image/计算机网络/1693755505518.png)

#### 典型的数据通信模型

* 电脑发出的数字信号经过调制解调器变成模拟信号, 接收方进行这个逆过程
* **信源**+**发送器**为**源系统**
* **传输系统**为中间的各种链路和交换系统等
* **接收器**+**信宿**为**目的系统**

![1693753494810](image/计算机网络/1693753494810.png)

#### 数据通信相关术语

![1693755158944](image/计算机网络/1693755158944.png)

#### 三种通信方式

![1693755548777](image/计算机网络/1693755548777.png)

![1693755245509](image/计算机网络/1693755245509.png)

#### 串行传输与并行传输

![1693755323004](image/计算机网络/1693755323004.png)

#### 同步传输与异步传输

![1693755404119](image/计算机网络/1693755404119.png)

# 数据链路层

## 差错控制

![1694153004946](image/计算机网络/1694153004946.png)

## 检错编码

### 奇偶校验码

奇偶校验码是**奇校验码**和**偶校验码**的统称,是一种最基本的检错码.

它有 n-1 位信息元和 1 位校验元组成, 如果是奇数校验码,在附加以为校验元后,码长为 n 的码字中 1 的个数为奇数个.

如果是奇数校验码,在附加以为校验元后,码长为 n 的码字中 1 的个数为偶数个.

**注意:**

**能检错检错奇数位的出错情况,但不能发现偶数位的出错情况(成对出错),也不能发现哪些位错了.**

![1694104506664](image/计算机网络/1694104506664.png)

### 循环冗余码(Cyclic Redundancy Code, CRC)

又称多项式码.

任何一个由二进制数位串组成的代码都可与一个只含 0 和 1 两个系数的多项式建立.

一个 k 位帧可以视为从 $X ^{k-1}$ 到 $X^0$ 的 k 次多项式的系数序列.

例如 1110011 有 7 位 表示成多项式是 $1*x^6+1*x^5+1*x^4+0*x^3+0*x^2+1*x^1+1*x^0 = x^6+x^5+x^4+x+1$

![1694109278689](image/计算机网络/1694109278689.png)

![1694111194599](image/计算机网络/1694111194599.png)

![1694111201708](image/计算机网络/1694111201708.png)

**不是可靠传输的原因是还是有些帧被丢弃了**

![1694111254520](image/计算机网络/1694111254520.png)

## 纠错编码

### 海明码

**工作流程:**

1. **确定校验码位数 r**
2. **确定校验码和数据的位置**
3. **求出校验码的值**
4. **检错并纠错**

![1694148923655](image/计算机网络/1694148923655.png)

### 海明距离(码距)

* **两个码字和码距 : 对应比特取值不同的比特数**
* **编码集的码距: 任意两个合法码字的海明距离的最小值**
* **一个编码集中要检错 d 位, 码距就要 d+1**
* **要纠错 d 位, 码距就要 2d+1**

![1694148449105](image/计算机网络/1694148449105.png)

### 1. 确定校验码位数

**数据/信息有 m 位, 冗余码/校验码有 r 位:**

**满足海明不等式: $\ \ 2^r \ge m + r +1$**

![1694149262635](image/计算机网络/1694149262635.png)

### 2.确定校验码和数据的位置

校验码放在序号为 $2^n$ 的位置, 数据按序填上

如下面例子:

数据D一共 4 位,求得校验码一共 3 位, 一共有 7 个序号

$2^0 , 2^1, 2^2$ 插入校验码,

数据D 按低位到高位插入 3 , 5 , 6 ,7

![1694149731671](image/计算机网络/1694149731671.png)

### 3.求出校验码的值

**将序号写成二进制**

**校验码分组, 把校验码插入位置的序号的二进制改为通配符 	**

**不同校验码分别负责其通配符相匹配的序号的位的校验,从而把原始数据分组校验		**

**采用奇校或偶校验(一般是偶校验,), 要让校验码负责校验的序号的位 1 的个数为偶数或者奇数.		**

**从而求出校验码的值**

**最后得到完整海明码 1100001**

![1694150340569](image/计算机网络/1694150340569.png)

### 4. 检错并纠错

若接收方收到的数据为1110001 与 发送数据 1100001 不同, 需要进行检错,找到出错的位数

检错类似奇偶校验,这里用偶校验示例

* 原数据

| 二进制 |  111  |  110  |  101  |  100  |  011  |  010  |  001  |
| :----: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
|  序号  |   7   |   6   |   5   |  !4   |   3   |  !2   |  !1   |
|   值   |   1   |   1   |   0   |   0   |   0   |   0   |   1   |

* 接受数据

| 二进制 |  111  |  110  |  101  |  100  |  011  |  010  |  001  |
| :----: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
|  序号  |   7   |   6   |   5   |  !4   |   3   |  !2   |  !1   |
|   值   |   1   |   1   |   1   |   0   |   0   |   0   |   1   |

4 号 校验码负责 4 5 6 7 的校验, 接受数据的相应位数 0 1 1 1 中 1 个个数不是偶数个, 说明这些序号中某些位出错了

2 号校验码负责 2 3 6 7 的校验, 接受数据的相应位数 0 0 1 1 中 1 个个数是偶数个, 说明这些序号中没有出错

1 号 校验码负责 1 3 5 7 的校验, 接受数据的相应位数 1 0 1 1 中 1 个个数不是偶数个, 说明这些序号中某些位出错了

如何判断具体哪个位置出错有两种常见方法:

* 集合运算:

![1694152478127](image/计算机网络/1694152478127.png)

* ???

从高位到低位让一共未知数 $X_{n}$ 与校验码其负责的序号的位做异或为0或满足偶校验, 求出 $X_{n}$

最后把求出的 $X_{n} X_{n-1} X_{n-2} ... X_{1}$ 当成二进制, 其所代表的数字就是出错的位数

![1694152631587](image/计算机网络/1694152631587.png)

![1694151104399](image/计算机网络/1694151104399.png)

## 介质访问控制

### 信道划分介质访问控制

#### 导图

![1695107977239](image/计算机网络/1695107977239.png)

![1695129756678](image/计算机网络/1695129756678.png)

![1695129813551](image/计算机网络/1695129813551.png)

#### 静态划分信道

##### FDM

##### TDM

##### STDM

##### WDM

##### CDM 码分多路复用

**前置知识:**

* **向量内积**

![1694577464231](image/计算机网络/1694577464231.png)

* **规格化内积**

![1695027227172](image/计算机网络/1695027227172.png)

**向量内积除以向量维数**

**内积除以向量维数**

##### 码分多路复用

**码分多址(CDMA)**是码分复用的一种方式.

* 通常把0写成-1
* 多个站点同时发送数据时候,要求各个站点**芯片序列相互正交**,**规格化内积为 0**
* 假设A站数据为   1   1 -1 1  1 -1  1 1    (1   1 0 1  1 0  1 1)
* ,,,,,,,,B站数据为  -1 -1 -1 1 -1 -1 -1 1	(0 0 0 1 0 0 0 1)
* 两站点数据规格化内积为0
* 公共信道上的数据是站点比特向量的差 ,如 0 0 -2 2 0 -2 0 2 = A - B
* 接收端数据分离通过将**合并的数据**与**源站**规格化内积.
* 得到两个结果 1 or -1 , 1 说明是B
* 因为 1 -1 =0 , 1+1 =2, -1-1=-2, 所以很容易将公共信道上的数据 0 0 -2 2 0 -2 0 2 分离开

![1695106754148](image/计算机网络/1695106754148.png)

#### 动态划分信道

#### 之随机访问介质访问控制

##### ALOHA协议

ALOHA协议可以分两种

* 纯ALOHA协议
* 时隙ALOHA协议

![1695108618571](image/计算机网络/1695108618571.png)

##### CSMA协议

##### CSMA/CD协议(重要)

##### CSMA/CA协议

#### 动态划分信道

#### 之轮询访问介质访问控制

主要记忆两种:

1. 轮询协议
2. **令牌传递协议**

![1695130088475](image/计算机网络/1695130088475.png)

##### 1.轮询协议

![1695130368693](image/计算机网络/1695130368693.png)

轮询的过程比喻起来就是:

主节点挨个问子节点的主机你要不要发送数据, 问到某个节点回答要就分配两种的信道用来发送数据,否则继续询问下一个.

(实际主节点与子节点之间是以数据帧的方式通信的.)

优点:

* 发送数据时能占用信道全部带宽
* 而且不会发生冲突

问题:

* 轮询开销
* 等待延迟
* 单点故障  (解决方法:备用主机等)

![1695130837261](image/计算机网络/1695130837261.png)

##### 2.令牌传递协议

典型的轮询访问介质控制协议.主要应用在令牌环局域网中.

1. 基本概念:

* 令牌 (Token) 是一个特殊格式的MAC控制帧,不含任何信息. 用于控制信道的使用, 确保同一时刻只有一个节点独占信道.
* 令牌环网 , 即 令牌环局域网
* TCU (Transmission control unit) 转发器

![1695131549679](image/计算机网络/1695131549679.png)

2. 介绍一下令牌环网之间的设备:

![1695131107137](image/计算机网络/1695131107137.png)

**3. 令牌环网中令牌和数据的传递过程:**

![轮询演示动画](gif/4.gif)

1. **网络空闲**时,环路中只有**令牌帧在环路中传递**
2. **令牌传递到有数据要发送的站点**时,该**站点就修改令牌中的一个标志位**,并在令牌中**附加自己需要传递的数据**,将**令牌变成一个数据帧**,然后**将这个数据帧发送**出去
3. **数据帧沿着环路传递**,接受到的**站点一边转发数据一边查看帧的目的地址**,如果**地址与自己相同**,那么**接收站就复制该数据帧以方便进一步的处理**
4. 数据帧沿着环路传输,直到**到达该帧的源站点**,**源站点收到自己发出去的帧**后变**不再转发**. 同时,通过**检验返回的帧**来查看数据传输过程中是否出错,如果**有错则重传**
5. **源站点传送完数据**后,**重新产生一个令牌**.并**传递给下一个站点**,以便**交出信道控制权**

## 局域网

### 局域网基本概念和体系结构

#### * **导图**

![1695146522904](image/计算机网络/1695146522904.png)

#### * **概念:**

**局域网 (Local Area Netmork, LAN)**是指在一个**较小的地理范围内**,

将**各种计算机,外部设备和数据库系统**等通过双绞线,同轴电缆等**连接介质连接起来**,

组成资源和信息共享的**计算机互联网络.**

![1695143023440](image/计算机网络/1695143023440.png)

#### * **特点**

![1695144459790](image/计算机网络/1695144459790.png)

#### * **决定局域网特性的主要要素:**

* 拓扑结构(网络拓扑)
* 传输介质
* 介质访问控制方式

![1695144574649](image/计算机网络/1695144574649.png)

#### * **常见网络拓扑**

* 星形拓扑  (星型结构
* 环形拓扑
* 总线形拓扑
* 星形和总线形结合的复合结构 (树形拓扑..)

![1695144635757](image/计算机网络/1695144635757.png)

#### * **局域网传输介质**

**双绞线为主流传输介质**

![1695144895525](image/计算机网络/1695144895525.png)

#### * **主要局域网介质访问控制方法**

* CSMA/CD
* 令牌总线
* 令牌环

前两种方法主要应用于**总线形局域网**, 令牌环主要用于**环形局域网**

![1695145128349](image/计算机网络/1695145128349.png)

#### * **局域网的分类**

* 以太网 ( IEEE 802.3)
* 令牌环网 (IEEE 802.5)
* FDDI (光线分布数字接口, IEEE 802.8)

![1695145180046](image/计算机网络/1695145180046.png)

#### * **IEEE 802标准**

![1695145473880](image/计算机网络/1695145473880.png)

![1695145598286](image/计算机网络/1695145598286.png)

**记忆:**

* 3, 以太网 802.3
* 5, 呜呜呜呜,单点出故障问题大 , 令牌环网 802.5
* 8,发发发发,光纤贵, FDDI 802.8
* 11, 路由器两根天线, WLAN 802.11

![1695145785379](image/计算机网络/1695145785379.png)

#### * **MAC 子层 与 LLC 子层**

![1695146173573](image/计算机网络/1695146173573.png)

#### **以太网与IEEE 802.3**

##### 导图

![1695226443958](image/计算机网络/1695226443958.png)

##### 以太网概述:

**IEEE8023.3标准**是一种**基带总线型**的**局域网标准**.
严格来说, **以太网应当是指符合 DIX Ethernet V2 标准的局域网**,
但是, **DIX Ethernet V2 标准**与 **IEEE802.3**只有很小的**差别**, 因此**将802.3局域网简称为以太网**

![1695147023863](image/计算机网络/1695147023863.png)

##### 以太网提供无连接, 不可靠的服务:

![1695220553075](image/计算机网络/1695220553075.png)

为了保持数据通信的方便性和可靠性, 以太网简化了通信流程 并 使用了CSMA/CD方式对总线进行访问控制.

**以太网采用两项措施以简化通信:**

1. 采用**无连接**的工作方式, 以太网尽最大努力交付数据, 提供的是**不可靠服务**, 对于**差错的纠正则由高层完成**
2. 发送的数据都采用**曼彻斯特编码**的信号, 每个**码元中间出现一次电压转换**. 接收端利用这种电压转换方便把位同步信号提取出来

**曼彻斯特编码回顾:**

![1695222333291](image/计算机网络/1695222333291.png)

##### 以太网传输介质与拓扑结构

###### **拓扑结构:**

* 以太网 **逻辑上**采用**总线形拓扑结构**,  以太网中所有计算机共享一条总线,  信号以**广播方式**发送.
* 物理拓扑是**星形**或**拓展星形结构**

![1695221010705](image/计算机网络/1695221010705.png)

###### **以太网传输介质:**

以太网常用的传输介质有四种:

* 粗缆 10BESE5
* 细缆 10BESE2
* 双绞线  10BASE-T
* 光纤 10BASE-FL

|     参数     |      10BASE5       |      10BASE2       |   10BASE-T   |   10BASE-FL   |
| :----------: | :----------------: | :----------------: | :----------: | :-----------: |
|   传输媒体   | 基带同轴电缆(粗缆) | 基带同轴电缆(细缆) | 非屏蔽双绞线 | 光纤对(850nm) |
|     编码     |    曼彻斯特编码    |    曼彻斯特编码    | 曼彻斯特编码 | 曼彻斯特编码  |
|   拓扑结构   |       总线形       |       总线形       |     星形     |    点对点     |
|   最大段长   |        500m        |        185m        |     100m     |     2000m     |
| 最多节点数目 |        100         |         30         |      2       |       2       |

注意: 10BESE-T以太网在逻辑上依然是总线形, 属于一个冲突域(CSMA/CD控制)

![1695223239352](image/计算机网络/1695223239352.png)

##### 适配器与MAC地址

![1695225060559](image/计算机网络/1695225060559.png)

可以查MAC地址相关出厂信息的网站:

https://regauth.standards.ieee.org/standards-ra-web/pub/view.html#registries

![1695225141951](image/计算机网络/1695225141951.png)

![1695225409585](image/计算机网络/1695225409585.png)

![1695225415282](image/计算机网络/1695225415282.png)

##### 以太网MAC帧

![1695225877324](image/计算机网络/1695225877324.png)

##### 高速以太网

速率**达到或超过****100Mb/s**的以太网称为**高速以太网**
速率$>=100 Mb/s$

**可以分为:**

* **100BASE-T 以太网**
* **吉比特以太网**
* **10吉比特以太网**

![1695226387696](image/计算机网络/1695226387696.png)

#### 无线局域网与 IEEE 802.11

**注意:**

无线局域网包含wifi , wifi是无线局域网技术的一种应用

![1695227565669](image/计算机网络/1695227565669.png)

##### 802.11 MAC帧

**802.11 帧有三种类型:**

* 数据帧
* 控制帧
* 管理帧

**802.11帧由三大部分组成:**

* MAC首部(MAC帧头) , 共30字节
* 帧主体, $<=2312字节$ , 比 以太网 的 最大长度长很多
* 帧检验序列FCS(CRC循环冗余码), 共 4 字节

**802.11MAC帧头的四个地址:**

* 地址1 ,  RA 	记忆 Receiver Address 		接收端(如目的那边的AP)
* 地址2 ,  TA 		Transmitter Address	发送端(如自己那边AP)
* 地址3 ,  DA 		Destination Address		目的地址
* 地址4 ,  SA 		Source Address		源地址(自己的地址)

![1695227645615](image/计算机网络/1695227645615.png)

**802.11MAC帧头的四个地址的四种情况:**

1) IBSS：Independent Basic Service Set（独立基础服务集）

IBSS帧是在独立的无线设备间进行通信时使用的。

2. TO AP：Transmission to Access Point（发送至接入点）

这种帧是从无线设备发送给接入点的帧。

3. FROM AP：Transmission from Access Point（接收自接入点）

这种帧是从接入点发送给无线设备的帧。

4. WDS：Wireless Distribution System（无线分布式系统）

这种帧用于连接多个无线接入点形成一个分布式网络系统。

BSSID：Basic Service Set Identifier（基础服务集标识符）

![1695228537797](image/计算机网络/1695228537797.png)

##### 无线局域网的分类

1. 有固定基础设施无线局域网
2. 无固定基础设施无线局域网的自组织网络

![1695229992816](image/计算机网络/1695229992816.png)

1. **有固定基础设施无线局域网**

服务集ESS

漫游

分配系统DS

AP Access Point

服务集标识符 : 如 wifi网络中的 wifi名称

![1695230304369](image/计算机网络/1695230304369.png)

![1695230083715](image/计算机网络/1695230083715.png)

2. **无固定基础设施的无线局域网**

相当于移动主机充当了AP,路由器的功能

比如安排在同一网段下的多台计算机

![1695230441076](image/计算机网络/1695230441076.png)

#### VLAN 基本概念和基本原理

VLAN (Virtual LAN , Virtual Local Area Network ) 指 **虚拟局域网**

##### 传统局域网的局限

一个以太网是一个广播域,当一个以太网包含的计算机太多时,往往会导致:

* 出现太多的广播帧, 特别是 ARP , RIP ,DHCP 协议
* 一个单位的不同部门共享一个局域网, 对信息保密和安全不利

![1695230965123](image/计算机网络/1695230965123.png)

##### VLAN基本概念

虚拟局域网VLAN是一种**将局域网内的设备划分成与物理位置无关的逻辑组的技术**

这些逻辑组有某些共同的需求, 每个VLAN是一个单独的广播域/不同的子网

虚拟局域网只是局域网提供给用户的一种服务, 并不是一种新型局域网

![1695302177569](image/计算机网络/1695302177569.png)

##### VLAN实现与802.1Q帧

802.3ac标准定义了支持VLAN的以太网帧格式的拓展.

在以太网帧中插入一个4字节的标识符(插入在源地址字段和类型字段之间), 称为VLAN标签

**插入VLAN标签的帧被称为802.1Q帧**

由于VLAN帧的首部增加了4字节, 所以以太网的最大帧长从1500+18=1518变成了1522字节

**VLAN标签:**

VLAN标签共$4*8=32位$ , 前2个字节,16位内置为0x8100, 表示这是一个802.1Q帧

后两个字节中,前4位没有用,后12位是该VLAN标识符VID, 表示属于哪个VLAN网

12位的VID从 0 to  4095 , 0与4095通常不用, 所以一共可以标识 1 to 4094 = 4094位不同的VLAN

插入VID后, 803.1Q帧的FCS 必须重新计算

**注意:**

* 交换机与主机之间交互的都是标准以太帧, 交换机与交换机之间交互的是802.1Q帧
* 各个主机不知道自己点VID,但交换机必须知道

![1695303792039](image/计算机网络/1695303792039.png)

**VLAN实现与通信:**

一个交换机上的不同端口组组成的一个VLAN可以通过交换机的转发表和VLAN表 广播通信

![1695304168985](image/计算机网络/1695304168985.png)

一个VLAN的范围可以跨越不同的交换机, 前提是所用的交换机识别和处理VLAN. (交换机间要有数据通路)

VLAN虽然可以跨越不同的交换机,但各自都是一个广播域

![1695304694945](image/计算机网络/1695304694945.png)

交换机上生成的个VLAN互不相通道,如果想要实现通信, 需要借助更高层的服务

比如:

* 路由器
* 三层交换机

![1695304185668](image/计算机网络/1695304185668.png)

#### 广域网WAN

![1695305049944](image/计算机网络/1695305049944.png)

![1695305911914](image/计算机网络/1695305911914.png)

广域网不等于互联网:

* 互联网可以连接不同类型的网络(局域网与广域网)
* 互联网通常用路由器来连接.
* 连接广域网是各个 结点交换机, 使用的链路都是高速链路

局域网可以通过广域网与距离很远的另一个局域网通信

结点交换机与路由器的区别与比较:

* 两者工作原理类似,都可以转发分组存储转发
* 结点交换机在单个网络中转发分组,路由器在多个网络构成的互联网中转发分组
* 一个结点交换机通常连接多个结点交换机, 为了提高网络可靠性

广域网与局域网的比较:

* 局域网使用的协议主要在数据链路层 (少量物理层)
* 广域网使用的协议主要在网络层 (也有数据链路层,物理层)
* 局域网强调数据传输
* 广域网强调数据共享

广域网的数据链路层协议主要有:

* PPP协议 (Point-to-Point Protocol)使用最广, 面向字节
* HDLC协议 (High Data Link Controlzzzzzzzzzzzzzzzzzzzzz)面向比特 ,基本不用了

##### PPP协议

---

# 网络层

![1695434143746](image/计算机网络/1695434143746.png)

## 导图

![1695432735820](image/计算机网络/1695432735820.png)

## 概述和功能

![1695434164085](image/计算机网络/1695434164085.png)

网络层设计地尽量简单,向其上层只提供**简单灵活的, 无连接的, 尽最大努力交付**的**数据报服务**.

网络层的**传输单位**是**数据报**.

其实**数据报**和我们经常使用的**分组**概念几乎一样, 当**数据报太大**时就会**分割**成一个个小的**分组.**

**IP数据报**和**IP分组**是**同义词**, 可以混用.

* **网络层不提供服务质量的保证**,
* **发送分组时不需要先建立连接**,
* **每个分组独立发送**
* **提供的是无连接, 不可靠的服务**

**网络层的功能**

![1695434103515](image/计算机网络/1695434103515.png)

关于拥塞控制:

![1695434129503](image/计算机网络/1695434129503.png)

## 网络的两个层面及路由器与SDK

### 导图

![1695438709890](image/计算机网络/1695438709890.png)

![1695438410176](image/计算机网络/1695438410176.png)

![1695438442022](image/计算机网络/1695438442022.png)

![1695438476706](image/计算机网络/1695438476706.png)

![1695438532544](image/计算机网络/1695438532544.png)

![1695438564017](image/计算机网络/1695438564017.png)

![1695438591700](image/计算机网络/1695438591700.png)

![1695438631935](image/计算机网络/1695438631935.png)

![1695438658397](image/计算机网络/1695438658397.png)

## 路由算法与路由协议概述

![1695438288035](image/计算机网络/1695438288035.png)

![1695438179266](image/计算机网络/1695438179266.png)

![1695438343306](image/计算机网络/1695438343306.png)

## 网际协议IP

### TCP/IP协议栈

* **TCP/IP协议栈是现在市面上主流的网络体系结构**

![1695438947236](image/计算机网络/1695438947236.png)

**层次结构:** 

* 应用层的各种协议 : HTTP,	FTP,	SMTP .....
* 运输层: TCP,   UDP
* 网际层: IP , ICMP,  IGMP
* 数据链路层
* 物理层

### IP数据报格式

**组成:**

* 首部	(固定部分20B   +   可变部分(1B ~ 40 B))
* 数据部分	(上层的数据(传输层的报文段))

![1695441497559](image/计算机网络/1695441497559.png)


### IP地址

#### IP地址及其表示方法

**IP地址可以记为:**

$IP地址 :: = {<网络号>,<主机号>}$

#### 分类的IP地址

![1695454704926](image/计算机网络/1695454704926.png)

#### 无分类编址CIDR

**CIDR** **(Classless Inter-Domain Routing)** , 读音 : "sider"

全名叫做 **无分类域间路由选择**

**CIDR可以表示为:**

$IP地址 :: = {<网络前缀>,<主机号>}$

**其要点主要有三个:**

1. 网络前缀




#### 子网划分与子网掩码

传统分类的IP地址的弱点: 

1. 固定的网络号位数不够灵活 (A8 ,B16, C24)
2. IP地址空间的利用率有时很低
3. 两级IP地址不够灵活


![1695455788274](image/计算机网络/1695455788274.png)

